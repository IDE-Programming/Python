<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="index.css">

    <title>Document</title>
</head>
<body>

    <div id="Principal">

        <div id="P1">

            <div id="interfaz">

            </div>

        </div>
        <div  id="P2">

            <div id="HerramientasDV">
                <button id="VisualizarCP" type="button">Configuración del panel</button>
                <button id="VisualizarCF" type="button">Lienzo</button>
                <button id="VisualizarCL" type="button">Label</button>
                <button id="VisualizarCE" type="button">Entry</button>
                <button id="VisualizarCB" type="button">Button</button>
                <button id="VisualizarCI" type="button">Imagen</button>
                <button type="button" id="ExtraerDatos">Extraer Datos</button>
            </div>

            <!-- CONFIGURACION DEL PANEL -->
            <div class="Ajustes" id="ConfPanel">
                <h1 class="titulo">Id</h1>
                <input  class="Entry" id="ConfPanelId" autocomplete="off"  type="text" title="Nombre de la variable" value="Main">
                <br>
                <h1 class="titulo">Nombre</h1>
                <input  class="Entry" id="ConfPanelNombre" autocomplete="off" type="text" title="Nombre del panel" value="Pantalla Principal">
                <br>
                <h1 class="titulo">Ancho</h1>
                <input  class="Entry" id="ConfPanelAncho" autocomplete="off" maxlength="4" type="text" title="Ancho del panel" value="Full Screen">
                <br>
                <h1 class="titulo">Largo</h1>
                <input  class="Entry" id="ConfPanelLargo" autocomplete="off" maxlength="4" type="text" title="Largo del panel" value="Full Screen">
                <br>

                <button type="button" class="buttonConsola" id="ConfPanelEditarTamaño">Editar Tamaño</button>

                <br>
                <h1 class="titulo">Color del Panel</h1>
                <input  class="Entry" id="ConfPanelColor" type="color" value="#B2AEAE">
                <button class="buttonConsola" type="button" id="ConfPanelEditarColor">Editar Colores</button>

                <br>
                <h1 class="titulo">Permitir edición de tamaño</h1>
                <select class="Combobox" id="ConfPanelCombo"> 
                    <option value="Si" selected>Si</option>
                    <option value="No">No</option>
                </select>
                <button type="button" class="buttonConsola" id="ConfPanelEditarGuardar">Guardar Cambios</button>


            </div>

            <!-- CONFIGURACION DE LA SECCION -->
            <div class="Ajustes" id="ConfSeccion">
                <h1 class="titulo">Id</h1>
                <input  class="Entry" id="ConfSeccionId" autocomplete="off"  type="text" title="Nombre de la variable" value="New Element">
                <br>
                <h1 class="titulo">Ancho</h1>
                <input  class="Entry" id="ConfSeccionAncho" autocomplete="off" maxlength="4" type="text" title="Ancho de la sección" value="200">
                <br>
                <h1 class="titulo">Largo</h1>
                <input  class="Entry" id="ConfSeccionLargo" autocomplete="off" maxlength="4" type="text" title="Largo de la sección" value="200">
                <br>
                <button type="button" class="buttonConsola" id="ConfSeccionEditarTamaño">Editar Tamaño</button>
                <br>
                <h1 class="titulo">Color de la sección</h1>
                <input  class="Entry" id="ConfSeccionColor" type="color" value="#C0A275">
                <button class="buttonConsola" type="button" id="ConfSeccionEditarColor">Editar Colores</button>
                <br>
                <div class="AjusteTam">
                    <input  class="EntryTam" id="ConfSeccionMT" autocomplete="off" maxlength="4" type="text" title="Margen Top" value="0">
                    <br>
                    <img class="ajusteTam" src="Imagenes/AjusteTam.png">
                    <br>
                    <input  class="EntryTam" id="ConfSeccionML" autocomplete="off" maxlength="4" type="text" title="Margen Left" value="0">

                </div>
                <br>
                <button class="buttonConsola" type="button" id="ConfSeccionEditarTam">Editar Posicionamiento</button>
                <button class="buttonConsola" type="button" id="ConfSeccionGuardar">Guardar</button>
                <button class="buttonConsola" type="button" id="ConfSeccionCancelar">Cancelar</button>

                <!-- <br>
                <h1 class="titulo">Permitir edición de tamaño</h1>
                <select class="Combobox" id="ConfSeccionCombo"> 
                    <option value="Si" selected>Si</option>
                    <option value="No">No</option>
                </select>
                <button type="button" class="buttonConsola" id="ConfSeccionEditarGuardar">Guardar Cambios</button> -->


            </div>
        </div>

    </div>
    
</body>
</html>


<!-- CODIGO EJECUTABLE -->
<script type="module">

    //.client conocer el ancho y largo de un componente
    var AnchoMaximo = document.getElementById("interfaz").clientWidth;
    var LargoMaximo = document.getElementById("interfaz").clientHeight;
    var Variables = [];
    var ContenidoEdicion = ["Main"];
    var Contenido =[];
    var idAnterior = "New Element";

    //Configuracion del panel
    document.getElementById("VisualizarCP").onclick = function(e){
        document.getElementById("ConfPanel").style.display = "inline-block";
        document.getElementById("ConfSeccion").style.display = "none";
        document.getElementById("VisualizarCP").disabled = true;
        document.getElementById("VisualizarCF").disabled = false;
    }
    document.getElementById("ConfPanelEditarTamaño").onclick = function(e){
        var largo = document.getElementById("ConfPanelLargo").value;
        var ancho = document.getElementById("ConfPanelAncho").value;

        if(largo == "Full Screen"){
            largo = LargoMaximo;
        }
        if(ancho == "Full Screen"){
            ancho = AnchoMaximo;
        }

        if(largo != "" && ancho != ""){
            if(ancho < AnchoMaximo && largo < LargoMaximo){
                document.getElementById("interfaz").style.height = largo+"px";
                document.getElementById("interfaz").style.width = ancho+"px";
            }
            else{
                if(ancho >= AnchoMaximo){
                    document.getElementById("interfaz").style.width = AnchoMaximo+"px";
                    document.getElementById("ConfPanelAncho").value = "Full Screen";
                }

                if(largo >= LargoMaximo){
                    document.getElementById("interfaz").style.height = LargoMaximo+"px";
                    document.getElementById("ConfPanelLargo").value = "Full Screen";
                }
                if(ancho < AnchoMaximo){
                    document.getElementById("interfaz").style.width = ancho+"px";
                }

                if(largo < LargoMaximo){
                    document.getElementById("interfaz").style.height = largo+"px";
                }
            }
        }
        else{
            alert("Llene todos los campos");
        }
    
   
    }
    document.getElementById("ConfPanelEditarColor").onclick = function(e){
        var color = document.getElementById("ConfPanelColor").value;
        document.getElementById("interfaz").style.backgroundColor = color;        
    }
    document.getElementById("ConfPanelEditarGuardar").onclick = function(e){

        var largo = document.getElementById("ConfPanelLargo").value;
        var ancho = document.getElementById("ConfPanelAncho").value;
        var color = document.getElementById("ConfPanelColor").value;
        var id = document.getElementById("ConfPanelId").value;
        var nombre = document.getElementById("ConfPanelNombre").value;
        var CTamaño = document.getElementById("ConfPanelCombo").value;

        largo = largo.replace("Full Screen",LargoMaximo);
        ancho = ancho.replace("Full Screen",AnchoMaximo);

        if(largo != "" && ancho != "" && color != "" && id != "" && nombre != ""){ 
            
            var ConversionAncho = Math.round((screen.width*ancho)/AnchoMaximo); 
            var ConversionLargo = Math.round((screen.height*largo)/LargoMaximo); 

            var Texto = "from tkinter import *\n"+
                        id+"= Tk()\n"+
                        id+".title('"+nombre+"')\n"+
                        id+".geometry('"+ConversionAncho+"x"+ConversionLargo+"')\n"+
                        id+".config(bg='"+color+"')\n";

            if(CTamaño == "No"){
                Texto = Texto + id+".resizable(0,0)\n";  // prohibe el cambio de tamaño
            }
            var Texto1 = id+".mainloop()"
           
            if(Contenido.length == 0){
                Variables.push(id);
                Contenido.push(Texto);
                Contenido.push(Texto1);
            }
            else{
                for (let i = 0; i < Contenido.length; i++) {
                    if(Contenido[i].includes("from tkinter import *")){
                        Variables[i] = id;
                        Contenido[i]= Texto;
                        Contenido[Contenido.length-1] = Texto1;
                        break;
                    }
                }
            }
            document.getElementById("HerramientasDV").style.display="inline";
            
        }
        else{
            alert("Llene todos los campos");
        }

    }
   
   
   //Crear Segmento
    document.getElementById("VisualizarCF").onclick = function(e){
        document.getElementById("HerramientasDV").style.display="none";
        document.getElementById("ConfPanel").style.display = "none";
        document.getElementById("ConfSeccion").style.display = "inline-block";
        document.getElementById("VisualizarCP").disabled = false;
        document.getElementById("VisualizarCF").disabled = true;

        var LeerDiv = document.getElementById("interfaz");
        var nuevoDiv = document.createElement("div");
        nuevoDiv.className = "Seccion";
        nuevoDiv.style.width = "200px"
        nuevoDiv.style.height = "200px"
        nuevoDiv.id="New Element";
        LeerDiv.appendChild(nuevoDiv);
    }
    document.getElementById("ConfSeccionEditarTamaño").onclick = function(e){
        var largo = document.getElementById("ConfSeccionLargo").value;
        var ancho = document.getElementById("ConfSeccionAncho").value;
        var id = document.getElementById("ConfSeccionId").value;
        var AnchoMaximo = document.getElementById("interfaz").clientWidth;
        var LargoMaximo = document.getElementById("interfaz").clientHeight;
        if(largo != "" && ancho != ""){
            var idModificacion = ValoracionNewElement(id);
            
            if(ancho < AnchoMaximo && largo < LargoMaximo){
                document.getElementById(idModificacion).style.height = largo+"px";
                document.getElementById(idModificacion).style.width = ancho+"px";
            }
            else{
                if(ancho >= AnchoMaximo){
                    document.getElementById(idModificacion).style.width = AnchoMaximo+"px";
                    document.getElementById("ConfSeccionAncho").value = "Full Screen";
                }

                if(largo >= LargoMaximo){
                    document.getElementById(idModificacion).style.height = LargoMaximo+"px";
                    document.getElementById("ConfSeccionLargo").value = "Full Screen";
                }
                if(ancho < AnchoMaximo){
                    document.getElementById(idModificacion).style.width = ancho+"px";
                }

                if(largo < LargoMaximo){
                    document.getElementById(idModificacion).style.height = largo+"px";
                }
            }


        }
        else{
            alert("Llene todos los campos");
        }
    
    }
    document.getElementById("ConfSeccionEditarColor").onclick = function(e){
        var id = document.getElementById("ConfSeccionId").value;
        var color = document.getElementById("ConfSeccionColor").value;
        var idModificacion = ValoracionNewElement(id);
        document.getElementById(idModificacion).style.backgroundColor = color;        
    }
    document.getElementById("ConfSeccionEditarTam").onclick = function(e){
        var Top = document.getElementById("ConfSeccionMT").value;
        var Left = document.getElementById("ConfSeccionML").value;
        var id = document.getElementById("ConfSeccionId").value;
        var idModificacion = ValoracionNewElement(id);

        if(Top != "" && Left != "" ){
            document.getElementById(idModificacion).style.top = Top+"px";
            document.getElementById(idModificacion).style.left = Left+"px";
        }
        else{
            alert("Llene todos los campos");
        }
    }
    document.getElementById("ConfSeccionGuardar").onclick = function(e){
        var largo = document.getElementById("ConfSeccionLargo").value;
        var ancho = document.getElementById("ConfSeccionAncho").value;
        var color = document.getElementById("ConfSeccionColor").value;
        var Top = document.getElementById("ConfSeccionMT").value;
        var Left = document.getElementById("ConfSeccionML").value;
        var id = document.getElementById("ConfSeccionId").value;
        var idModificacion = ValoracionNewElement(id);
        var AnchoMaximoA = document.getElementById("interfaz").clientWidth;
        var LargoMaximoA = document.getElementById("interfaz").clientHeight;
        largo = largo.replace("Full Screen",LargoMaximoA);
        ancho = ancho.replace("Full Screen",AnchoMaximoA);
        if(largo != "" && ancho != "" && Top != "" && Left != "" && document.getElementById(idModificacion).value != ""){
            
            Variables.push(idModificacion);
            var ConversionAncho = Math.round(((screen.width*ancho)/AnchoMaximoA)/((7*AnchoMaximo)/AnchoMaximoA)); 
            var ConversionLargo = Math.round(((screen.height*largo)/LargoMaximoA)/((15*LargoMaximo)/LargoMaximoA));
            var ConversionTop = Math.round(Top*1.3);
            var ConversionLeft = Math.round(Left*1.5);


            var Text = idModificacion + " = Label( "+Variables[0]+", width= "+(ConversionAncho)+", height="+(ConversionLargo)+",bg= '"+color+"').place(x ="+ConversionLeft+", y = "+ConversionTop+")\n";
            Contenido.splice(Contenido.length-1,0,Text);  
            idAnterior = "New Element";
            document.getElementById("ConfPanel").style.display = "inline-block";
            document.getElementById("HerramientasDV").style.display="inline";
            document.getElementById("ConfSeccion").style.display = "none";
            document.getElementById("VisualizarCP").disabled = true;
            document.getElementById("VisualizarCF").disabled = false;          
        }
        else{
            alert("Llene todos los campos");
        }
    }

    
    document.getElementById("ConfSeccionCancelar").onclick = function(e){
        document.getElementById(idAnterior).remove();
        idAnterior = "New Element";
        document.getElementById("ConfPanel").style.display = "inline-block";
        document.getElementById("HerramientasDV").style.display="inline";
        document.getElementById("ConfSeccion").style.display = "none";
        document.getElementById("VisualizarCP").disabled = true;
        document.getElementById("VisualizarCF").disabled = false;
    }


    function ValoracionNewElement(id){
        if(id=="New Element"){
            alert("Ingrese un nuevo id");
        }
        else{
            if(id == ""){
                alert("Ingrese Id");
            }
            else{
                var activador = 0;
                for (let i = 0; i < Variables.length; i++) {
                    if(id == Variables[i]){
                        activador = 1;
                    }
                }
                if(activador == 0){
                    document.getElementById(idAnterior).id=id;
                    idAnterior = id;
                    return id;
                }
                else{
                    alert(id + " ya se encuentra en uso");
                }
            }
        }
    }

   //EXTRACCION DE LOS DATOS
    document.getElementById("ExtraerDatos").onclick = function(e){

        // document.getElementById("New Element").id="Prueba";
        // document.getElementById("Seccion1").remove();

        var Programacion = "";
        for (let i = 0; i < Contenido.length; i++) {
          Programacion = Programacion+Contenido[i];  
        }
        console.log(Programacion)
    }

   

  

</script>


<!-- LIMITACIONES DEL INPUT -->
<script type="module">


    document.getElementById("ConfPanelAncho").onkeypress = function() {              
        var Extraer = document.getElementById("ConfPanelAncho").value;
        var letras = "0987654321";
        var key = event.keyCode;
        var tecla = String.fromCharCode(key).toLowerCase();
        var especiales = [8];    
        var tecla_especial = false
        for(var i in especiales) {
            if(key == especiales[i]) {
                tecla_especial = true;
                break;
            }
        }  
        if(letras.indexOf(tecla) == -1 && !tecla_especial){
            return false;
        }   
     
  };
    document.getElementById("ConfPanelLargo").onkeypress = function() {              
        var Extraer = document.getElementById("ConfPanelLargo").value;
        var letras = "0987654321";
        var key = event.keyCode;
        var tecla = String.fromCharCode(key).toLowerCase();
        var especiales = [8];    
        var tecla_especial = false
        for(var i in especiales) {
            if(key == especiales[i]) {
                tecla_especial = true;
                break;
            }
        }  
        if(letras.indexOf(tecla) == -1 && !tecla_especial){
            return false;
        }        


  };



  document.getElementById("ConfSeccionAncho").onkeypress = function() {              
        var Extraer = document.getElementById("ConfSeccionAncho").value;
        var letras = "0987654321";
        var key = event.keyCode;
        var tecla = String.fromCharCode(key).toLowerCase();
        var especiales = [8];    
        var tecla_especial = false
        for(var i in especiales) {
            if(key == especiales[i]) {
                tecla_especial = true;
                break;
            }
        }  
        if(letras.indexOf(tecla) == -1 && !tecla_especial){
            return false;
        }   
     
  };
  document.getElementById("ConfSeccionLargo").onkeypress = function() {              
        var Extraer = document.getElementById("ConfSeccionLargo").value;
        var letras = "0987654321";
        var key = event.keyCode;
        var tecla = String.fromCharCode(key).toLowerCase();
        var especiales = [8];    
        var tecla_especial = false
        for(var i in especiales) {
            if(key == especiales[i]) {
                tecla_especial = true;
                break;
            }
        }  
        if(letras.indexOf(tecla) == -1 && !tecla_especial){
            return false;
        }   
     
  };
</script>

